<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QuickCV — Generate</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:24px;background:#fff}
    h1{margin-bottom:6px}.muted{color:#666;margin-bottom:18px}
    label{display:block;margin:8px 0 4px;font-weight:600}
    input,textarea{width:100%;padding:10px;border:1px solid #ddd;border-radius:8px}
    textarea{min-height:80px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .card{border:1px solid #eee;border-radius:12px;padding:12px;margin:12px 0}
    .actions{margin-top:16px;display:flex;gap:10px;flex-wrap:wrap}
    button{padding:10px 14px;border:0;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.06);cursor:pointer}
    .small{padding:6px 10px;border-radius:8px}

    /* Segmented control (Template Style) */
    .seg-wrap{margin:12px 0 6px}
    .seg{display:inline-flex;border:1px solid #d9d9d9;border-radius:12px;overflow:hidden;background:#fff}
    .seg button{padding:10px 14px;border:0;background:transparent;cursor:pointer;min-width:110px;font-weight:600;color:#333}
    .seg button+button{border-left:1px solid #eaeaea}
    .seg button.active{background:#f2f7ff;color:#1f6feb;box-shadow:inset 0 0 0 2px rgba(31,111,235,.15)}
    .hint{color:#777;font-size:12px;margin-top:6px}

    @media (max-width:720px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <h1>QuickCV — Generate</h1>
  <div class="muted">Your progress is saved automatically on this device.</div>

  <form id="cv-form" method="post" action="/generate">
    <!-- Segmented control -->
    <label>Template Style</label>
    <div class="seg-wrap">
      <div class="seg" id="seg">
        <button type="button" data-template="classic" class="active">Classic</button>
        <button type="button" data-template="modern">Modern</button>
        <button type="button" data-template="compact">Compact</button>
      </div>
      <div class="hint">Click to choose a style. Your choice is saved.</div>
    </div>
    <input type="hidden" name="template" id="templateField" value="classic">

    <div class="grid">
      <div><label>Name</label><input name="name" placeholder="Alex Johnson" required></div>
      <div><label>Role</label><input name="role" placeholder="Junior Web Developer"></div>
    </div>
    <div class="grid">
      <div><label>Location</label><input name="location" placeholder="Leeds, UK"></div>
      <div><label>Email</label><input name="email" placeholder="alex@example.com"></div>
    </div>
    <div class="grid">
      <div><label>Phone</label><input name="phone" placeholder="+44 7123 456 789"></div>
      <div><label>Website</label><input name="website" placeholder="https://yoursite.com"></div>
    </div>

    <label>Profile Summary</label>
    <textarea name="summary" placeholder="2–4 lines about you."></textarea>

    <label>Skills (comma-separated)</label>
    <input name="skills" placeholder="HTML, CSS, JavaScript, React, Git">

    <div class="card">
      <strong>Experience (JSON array)</strong>
      <textarea name="experience_json">[]</textarea>
    </div>

    <div class="card">
      <strong>Education (JSON array)</strong>
      <textarea name="education_json">[]</textarea>
    </div>

    <div class="card">
      <strong>Projects (JSON array)</strong>
      <textarea name="projects_json">[]</textarea>
    </div>

    <div class="grid">
      <div><label>Certifications (comma-separated)</label><input name="certs" placeholder="Google Analytics, AWS CCP"></div>
      <div><label>Awards (comma-separated)</label><input name="awards" placeholder="Student of the Year"></div>
    </div>

    <div class="actions">
      <button type="submit" id="dl-html">Download HTML</button>
      <button type="button" id="dl-pdf">Download PDF</button>
      <button type="button" class="small" id="clear-form">Clear form</button>
    </div>
  </form>

  <script>
    const KEY = "quickcv_form_v1";
    const form = document.getElementById('cv-form');
    const seg = document.getElementById('seg');
    const templateField = document.getElementById('templateField');
    function setTemplate(val){
      templateField.value = val;
      document.querySelectorAll('.seg button').forEach(b => b.classList.toggle('active', b.dataset.template===val));
      try { localStorage.setItem(KEY+"_template", val); } catch(e){}
    }
    seg.addEventListener('click', (e)=>{ const btn=e.target.closest('button'); if(!btn) return; setTemplate(btn.dataset.template); });

    form.addEventListener('submit', ()=>{});
    document.getElementById('dl-html').addEventListener('click', () => { form.action="/generate"; });
    document.getElementById('dl-pdf').addEventListener('click', () => { form.action="/generate_pdf"; form.submit(); });
    document.getElementById('clear-form').addEventListener('click', () => { localStorage.clear(); location.reload(); });
  </script>
</body>
</html>
